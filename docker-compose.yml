version: '3.4'

networks: 
    traefik:
        external: true

services:
    traefik:
        # The official v2 Traefik docker image
        image: traefik:v2.3
        restart: always
        # Enables the web UI and tells Traefik to listen to docker
        command: --api.insecure=true --providers.docker
        ports:
            - "80:80"
            - "443:443"
            # The Web UI (enabled by --api.insecure=true)
            - "8080:8080"
        volumes:
            # So that Traefik can listen to the Docker events
            - /var/run/docker.sock:/var/run/docker.sock
            - ./traefik.yml:/etc/traefik.yml
            - ./acme.json:/root/acme.json
        networks: 
            - traefik
        
            